<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>API Documentation - RC Widget</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans",
          Helvetica, Arial, sans-serif;
        line-height: 1.6;
        color: #24292f;
        background-color: #ffffff;
        font-size: 16px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 40px 20px;
      }

      h1 {
        font-size: 2rem;
        font-weight: 600;
        color: #24292f;
        margin-bottom: 16px;
        padding-bottom: 10px;
        border-bottom: 1px solid #d0d7de;
      }

      h2 {
        font-size: 1.5rem;
        font-weight: 600;
        color: #24292f;
        margin: 24px 0 16px 0;
        padding-bottom: 8px;
        border-bottom: 1px solid #d0d7de;
      }

      h3 {
        font-size: 1.25rem;
        font-weight: 600;
        color: #24292f;
        margin: 24px 0 16px 0;
      }

      h4 {
        font-size: 1rem;
        font-weight: 600;
        color: #24292f;
        margin: 16px 0 8px 0;
      }

      p {
        margin-bottom: 16px;
        color: #656d76;
      }

      ul {
        margin: 0 0 16px 0;
        padding-left: 32px;
      }

      li {
        margin-bottom: 4px;
        color: #656d76;
      }

      .endpoint {
        background-color: #0969da;
        color: white;
        padding: 8px 16px;
        border-radius: 6px;
        font-family: "SF Mono", Monaco, Inconsolata, "Roboto Mono", monospace;
        font-size: 14px;
        margin: 16px 0;
        display: inline-block;
      }

      .method {
        background-color: #1f883d;
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        font-weight: bold;
        font-size: 12px;
        margin-right: 8px;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin: 16px 0;
        border: 1px solid #d0d7de;
        border-radius: 6px;
        overflow: hidden;
      }

      th {
        background-color: #f6f8fa;
        padding: 12px;
        text-align: left;
        font-weight: 600;
        border-bottom: 1px solid #d0d7de;
        color: #24292f;
      }

      td {
        padding: 12px;
        border-bottom: 1px solid #d0d7de;
        color: #656d76;
      }

      tbody tr:hover {
        background-color: #f6f8fa;
      }

      code {
        background-color: rgba(175, 184, 193, 0.2);
        padding: 2px 4px;
        border-radius: 3px;
        font-family: "SF Mono", Monaco, Inconsolata, "Roboto Mono", monospace;
        font-size: 85%;
        color: #24292f;
      }

      pre {
        background-color: #f6f8fa;
        border: 1px solid #d0d7de;
        border-radius: 6px;
        padding: 16px;
        overflow-x: auto;
        margin: 16px 0;
      }

      pre code {
        background: none;
        padding: 0;
        font-size: 14px;
        color: #24292f;
      }

      .required {
        background-color: #1f883d;
        color: white;
        padding: 2px 6px;
        border-radius: 12px;
        font-size: 12px;
        font-weight: bold;
      }

      .alert {
        padding: 16px;
        margin: 16px 0;
        border: 1px solid transparent;
        border-radius: 6px;
      }

      .alert-success {
        color: #1a7f37;
        background-color: #dafbe1;
        border-color: #1f883d;
      }

      .alert-warning {
        color: #9a6700;
        background-color: #fff8c5;
        border-color: #d1242f;
      }

      .note {
        padding: 16px;
        margin: 16px 0;
        background-color: #ddf4ff;
        border: 1px solid #54aeff;
        border-radius: 6px;
        color: #0969da;
      }

      .copy-btn {
        position: absolute;
        top: 8px;
        right: 8px;
        background: #f6f8fa;
        border: 1px solid #d0d7de;
        padding: 4px 8px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 12px;
        color: #656d76;
      }

      .copy-btn:hover {
        background: #ffffff;
      }

      .code-container {
        position: relative;
      }

      blockquote {
        padding: 0 1em;
        color: #656d76;
        border-left: 0.25em solid #d0d7de;
        margin: 0 0 16px 0;
      }

      @media (max-width: 768px) {
        .container {
          padding: 20px 16px;
        }

        h1 {
          font-size: 1.75rem;
        }

        h2 {
          font-size: 1.25rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>API Documentation - RC Widget</h1>

      <h2>Overview</h2>
      <p>
        This API allows you to retrieve test widget data for merchants, including
        partner and client information.
      </p>

      <h2>Widget Integration</h2>
      <p>
        To integrate the RC Widget on your website, add the following script before the closing <code>&lt;/body&gt;</code> tag:
      </p>

      <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>&lt;script&gt;
      (function (d, w, ls, p, v, sn, s, a) {
          var wc = w.rc = {}; 
          wc[p] = 'https://test-widget.rechcompt.com/'; 
          wc[v] = '0.01'; 
          tm = Date.now();
          wc[a] = null; 
          var _ls = JSON.parse(ls.getItem(sn)) ?? {}; 
          _ls.lastload = tm
          if (_ls?.lastSave) { 
            if (tm - _ls.lastSave > 20000) { 
              if (_ls?.insertcode) { 
                eval(_ls.insertcode); 
                _ls.lastSave = tm 
              } 
            } else { 
              _ls.lastSave = null 
            } 
          } 
          if (_ls) { 
            ls.setItem(sn, JSON.stringify(_ls)) 
          }
          s = d.createElement('script'); 
          try { 
            var tmp = w.location.href ? 1 : 0 
          } catch (e) { 
            var tmp = 0 
          } 
          s.type = 'text/javascript'; 
          s.defer = 'defer'; 
          s.src = wc[p] + 'cdn/assets/test-script.js?id=2024&v=' + tm; 
          s.onload = function () {}; 
          d.body.appendChild(s)
        })(document, window, localStorage, 'rc_path', 'rc_version', 'rc_storage', 'rc_scripts', 'App')
&lt;/script&gt;</code></pre>
      </div>

      <div class="note">
        <strong>Note:</strong> This script should be placed just before the closing <code>&lt;/body&gt;</code> tag of your HTML document to ensure proper loading and functionality of the RC Widget.
      </div>

      <h2>Endpoint</h2>

      <h3>GET Merchant Test Widget</h3>
      <p>Retrieves test widget data for a merchant.</p>

      <p>
        <strong>URL:</strong>
        <span class="endpoint"
          >https://test-site.rechcompt.com/api/v1/merchants/test-widget</span
        >
      </p>

      <p><strong>Method:</strong> <span class="method">POST</span></p>

      <p><strong>Content-Type:</strong> <code>application/json</code></p>

      <h2>Authentication</h2>
      <p>
        The API uses an authentication system based on custom headers.
      </p>

      <h3>Required headers</h3>

      <table>
        <thead>
          <tr>
            <th>Header</th>
            <th>Type</th>
            <th>Required</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>x-transaction-key</code></td>
            <td>string</td>
            <td><span class="required">✅</span></td>
            <td>Unique transaction key</td>
          </tr>
          <tr>
            <td><code>x-transaction-password</code></td>
            <td>string</td>
            <td><span class="required">✅</span></td>
            <td>Transaction password</td>
          </tr>
          <tr>
            <td><code>x-user-key</code></td>
            <td>string</td>
            <td><span class="required">✅</span></td>
            <td>User key</td>
          </tr>
        </tbody>
      </table>

      <h3>Headers example</h3>
      <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>headers: {
    "x-transaction-key": "186339491a3fc16e",
    "x-transaction-password": "03206b53ebf67688",
    "x-user-key": "409db2794eff1d8c"
}</code></pre>
      </div>

      <h2>Request</h2>

      <h3>Request body</h3>
      <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>{}</code></pre>
      </div>
      <div class="note">
        <strong>Note:</strong> The request body is empty for this endpoint
      </div>

      <h3>Complete request example</h3>
      <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>axios.post('https://test-site.rechcompt.com/api/v1/merchants/test-widget', {}, {
    headers: {
        "x-transaction-key": "186339491a3fc16e",
        "x-transaction-password": "03206b53ebf67688",
        "x-user-key": "409db2794eff1d8c"
    }
})</code></pre>
      </div>

      <h2>Response</h2>

      <h3>Success status</h3>
      <div class="alert alert-success"><strong>Code:</strong> 200 OK</div>

      <h3>Response structure</h3>
      <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>{
    "client": {
        "firstname": "string",
        "lastname": "string",
        "country_nice_name": "string",
        "status": "number",
        "balance": "number"
    },
    "partner": {
        "name": "string",
        "partner_status": "number",
        "country_nice_name": "string",
        "balance": "number"
    }
}</code></pre>
      </div>

      <h3>Field descriptions</h3>

      <h4><code>client</code> object</h4>
      <table>
        <thead>
          <tr>
            <th>Field</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>firstname</code></td>
            <td>string</td>
            <td>Client's first name</td>
          </tr>
          <tr>
            <td><code>lastname</code></td>
            <td>string</td>
            <td>Client's last name</td>
          </tr>
          <tr>
            <td><code>status</code></td>
            <td>number</td>
            <td>Client status (2 = active)</td>
          </tr>
          <tr>
            <td><code>country_nice_name</code></td>
            <td>string</td>
            <td>Country name</td>
          </tr>
          <tr>
            <td><code>balance</code></td>
            <td>number</td>
            <td>Client account balance</td>
          </tr>
        </tbody>
      </table>

      <h4><code>partner</code> object</h4>
      <table>
        <thead>
          <tr>
            <th>Field</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>name</code></td>
            <td>string</td>
            <td>Partner name</td>
          </tr>
          <tr>
            <td><code>partner_status</code></td>
            <td>number</td>
            <td>Partner status (2 = active)</td>
          </tr>
          <tr>
            <td><code>country_nice_name</code></td>
            <td>string</td>
            <td>Country name</td>
          </tr>
          <tr>
            <td><code>balance</code></td>
            <td>number</td>
            <td>Partner account balance</td>
          </tr>
        </tbody>
      </table>

      <h3>Response example</h3>
      <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>{
    "client": {
        "firstname": "John",
        "lastname": "Doe",
        "status": 2,
        "balance": 50000
    },
    "partner": {
        "name": "Test Partner",
        "partner_status": 2,
        "country_nice_name": "Benin",
        "balance": 125000
    }
}</code></pre>
      </div>

      <h2>RcTransaction functionality</h2>

      <p>
        The code also uses an <code>RcTransaction</code> function to handle
        transactions.
      </p>

      <h3>RcTransaction parameters</h3>
      <table>
        <thead>
          <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>transactionKey</code></td>
            <td>string</td>
            <td>Transaction key</td>
          </tr>
          <tr>
            <td><code>transactionPassword</code></td>
            <td>string</td>
            <td>Transaction password</td>
          </tr>
          <tr>
            <td><code>action</code></td>
            <td>string</td>
            <td>Action to perform ("+" for deposit, "-" for withdrawal)</td>
          </tr>
          <tr>
            <td><code>webhook</code></td>
            <td>string</td>
            <td>Callback URL</td>
          </tr>
          <tr>
            <td><code>ptner_transaction_id</code></td>
            <td>number</td>
            <td>Partner transaction ID (randomly generated)</td>
          </tr>
        </tbody>
      </table>

      <h3>Usage example</h3>
      <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>RcTransaction({
    transactionKey: "186339491a3fc16e",
    transactionPassword: "03206b53ebf67688",
    action: "+", // or "-"
    webhook: "https://rechcompt.com",
    ptner_transaction_id: Math.floor(Math.random() * 1000000000)
})</code></pre>
      </div>

      <h2>Error handling</h2>

      <p>The code checks the response status:</p>
      <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code>if(response?.status === 200) {
    // Data processing
}</code></pre>
      </div>

      <div class="alert alert-warning">
        For complete error handling, it is recommended to add a
        <code>.catch()</code> block to the axios promise.
      </div>

      <h2>Important notes</h2>

      <ul>
        <li>
          Authentication keys are hardcoded in the code - in production, they
          should be secured
        </li>
        <li>
          Balance display uses the format "amount + ' F'" (CFA Franc)
        </li>
        <li>Active statuses correspond to the value <code>2</code></li>
        <li>
          The code generates transaction IDs randomly for operations
        </li>
      </ul>
    </div>

    <script>
      function copyCode(button) {
        const codeContainer = button.parentElement;
        const pre = codeContainer.querySelector("pre");
        const code = pre.textContent;

        navigator.clipboard.writeText(code).then(() => {
          const originalText = button.textContent;
          button.textContent = "Copied!";
          button.style.background = "#1f883d";
          button.style.color = "white";

          setTimeout(() => {
            button.textContent = originalText;
            button.style.background = "#f6f8fa";
            button.style.color = "#656d76";
          }, 2000);
        });
      }
    </script>
  </body>
</html>